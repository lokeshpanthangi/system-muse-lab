users--
{
  _id: ObjectId,
  first_name: string,
  last_name: string,
  email: string,              // unique
  password_hash: string,
  created_at: datetime,
  updated_at: datetime
}

problems--
{
  _id: ObjectId,
  title: string,
  description: string,
  difficulty: string,         // "easy" | "medium" | "hard"
  categories: [string],       // ["Web Services", "Databases"]
  estimated_time: string,     // "45 mins"
  requirements: [string],     // Array of requirement strings
  constraints: [string],      // Array of constraint strings
  hints: [string],            // Array of hint strings
  created_by: string,         // user email
  created_at: datetime,
  updated_at: datetime
}

submissions--
{
  _id: ObjectId,
  user_id: string,            // reference to users
  problem_id: string,         // reference to problems
  diagram_data: object,       // Excalidraw JSON
  score: number,              // 0-100
  time_spent: number,         // seconds
  status: string,             // "completed" | "in-progress"
  feedback: {
    strengths: [string],
    improvements: [string],
    missing_components: [string]
  },
  chat_messages: [
    {
      role: string,           // "user" | "assistant"
      content: string,
      timestamp: datetime
    }
  ],
  submitted_at: datetime,
  updated_at: datetime
}

sessions--
{
  _id: ObjectId,
  user_id: string,            // reference to users
  problem_id: string,         // reference to problems
  diagram_data: object,       // Excalidraw JSON (auto-saved)
  diagram_hash: string,       // Hash of diagram_data for change detection
  time_spent: number,         // seconds spent in session
  status: string,             // "active" | "paused" | "submitted" | "abandoned"
  chat_messages: [
    {
      role: string,           // "user" | "assistant"
      content: string,
      timestamp: datetime
    }
  ],
  last_saved_at: datetime,    // Last auto-save timestamp
  started_at: datetime,       // Session start time
  ended_at: datetime,         // When submitted/abandoned (null if active)
  created_at: datetime,
  updated_at: datetime
}

